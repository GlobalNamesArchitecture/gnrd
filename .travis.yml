sudo: required
language: ruby
rvm:
  - 2.0
  - 2.1
  - 2.2
bundler_args: --without development
services:
  - redis-server
  - docker
before_install:
  - docker run -d --name nn -p 0.0.0.0:6384:6384 gnames/netineti
  - docker run -d --name tf -p 0.0.0.0:1234:1234 gnames/taxonfinder
  - sudo apt-get update
  - sudo apt-get -qy install graphicsmagick
  - sudo apt-get -qy install --fix-missing poppler-utils
  - sudo apt-get -qy install --fix-missing poppler-data
  - sudo apt-get -qy install ghostscript
  - sudo apt-get -qy install tesseract-ocr
  - sudo apt-get -qy install pdftk
  - sudo apt-get -qy install libreoffice
  - sudo apt-get -qy install libmagic-dev
  - sudo apt-get -qy install wget
  - cp config/config.json.example config/config.json
  - gem install bundler
# before_script:
#   - QUEUE=name_finder_high,name_finder,name_finder_low TERM_CHILD=1 rake resque:work &
branches:
  only:
    - master

